%FORWARD KINEMATICSfunction [x] = forward_kinematics(u)% [x] = forward_kinematics(u,th)% Calculates the forward kinematics for a given th and link lengths% 	Stefan Schaal, Jan 99n_joints = length(u)/2;th = u(1:n_joints);links = u(n_joints+1:end);sum_ths = 0;x = zeros(n_joints+1,2);for i=1:n_joints,  if mod(i,2)==1, % revolute joint    sum_ths = sum_ths + th(i);    x(i+1,1) = x(i,1) + links(i)*cos(sum_ths);    x(i+1,2) = x(i,2) + links(i)*sin(sum_ths);  else    x(i+1,1) = x(i,1) + (links(i)+th(i))*cos(sum_ths);    x(i+1,2) = x(i,2) + (links(i)+th(i))*sin(sum_ths);  endendx = [x(end,:) sum_ths];